const translations = {
    da: {
        title: 'PDF Quiz',
        subtitle: 'Opret og administrer dine quizzer',
        myQuizzes: 'Mine Quizzer',
        createQuiz: '+ Opret ny quiz',
        noQuizzes: 'Ingen quizzer endnu. Opret din første quiz!',
        createNewQuiz: 'Opret ny quiz',
        editQuiz: 'Rediger quiz',
        name: 'Navn:',
        namePlaceholder: 'F.eks. Biologi - Kapitel 3',
        description: 'Beskrivelse (valgfrit):',
        descriptionPlaceholder: 'Kort beskrivelse af quizzen...',
        save: 'Gem',
        cancel: 'Annuller',
        apiKey: 'OpenAI API-nøgle:',
        apiKeyHint: 'Nøglen gemmes lokalt i din browser',
        selectPdfFiles: 'Vælg PDF-filer:',
        selectFiles: 'Vælg filer:',
        dropZoneText: 'Træk filer hertil eller klik for at vælge',
        dropZoneHint: 'PDF, Word, TXT, Markdown',
        generateQuestions: "Generer spørgsmål fra filer",
        skip: 'Spring over',
        continueToQuiz: 'Fortsæt til quiz',
        quizReady: 'Quiz klar!',
        startQuiz: 'Start Quiz',
        manageQuestions: 'Administrer spørgsmål',
        addMorePdfs: "Tilføj flere PDF'er",
        backToMyQuizzes: 'Tilbage til mine quizzer',
        addQuestion: '+ Tilføj spørgsmål',
        deleteAll: 'Slet alle',
        back: 'Tilbage',
        addNewQuestion: 'Tilføj nyt spørgsmål',
        editQuestion: 'Rediger spørgsmål',
        question: 'Spørgsmål:',
        questionEntity: 'Spørgsmål',
        questionPlaceholder: 'Skriv dit spørgsmål her...',
        answerOptions: 'Svarmuligheder:',
        answerA: 'Svar A',
        answerB: 'Svar B',
        answerC: 'Svar C',
        answerD: 'Svar D',
        correctAnswer: 'Korrekt svar:',
        questionOf: 'Spørgsmål {current} af {total}',
        nextQuestion: 'Næste spørgsmål',
        quizFinished: 'Quiz Afsluttet!',
        tryAgain: 'Prøv igen',
        footer: 'Opret quizzer fra dine PDF-dokumenter',
        open: 'Åbn',
        edit: 'Rediger',
        delete: 'Slet',
        questions: 'spørgsmål',
        noDescription: 'Ingen beskrivelse',
        noQuestionsYet: 'Ingen spørgsmål endnu. Tilføj spørgsmål manuelt eller generer fra PDF.',
        questionsAvailable: '{count} spørgsmål tilgængelige ({selected} tilfældige vælges)',
        noQuestionsUpload: 'Ingen spørgsmål endnu. Upload PDF-filer for at generere spørgsmål.',
        processing: 'Behandler {file} ({current}/{total})...',
        questionsGenerated: '✓ {file}: {count} spørgsmål genereret',
        errorProcessing: '✗ Fejl ved {file}: {error}',
        done: '✓ Færdig! {added} nye spørgsmål tilføjet. Total: {total} spørgsmål.',
        confirmDeleteQuiz: 'Er du sikker på, at du vil slette "{name}"? Dette kan ikke fortrydes.',
        confirmDeleteQuestion: 'Er du sikker på, at du vil slette dette spørgsmål?',
        confirmDeleteAll: 'Er du sikker på, at du vil slette ALLE spørgsmål? Dette kan ikke fortrydes.',
        undo: 'Fortryd',
        deleted: 'Slettet: {name}',
        restored: 'Gendannet: {name}',
        enterQuizName: 'Indtast venligst et navn til quizzen',
        enterQuestion: 'Indtast venligst et spørgsmål',
        fillAllOptions: 'Alle svarmuligheder skal udfyldes',
        needOneQuestion: 'Du skal have mindst ét spørgsmål for at starte quizzen.',
        yourAnswer: 'Dit svar:',
        correctAnswerWas: 'Korrekt svar:',
        source: 'Kilde:',
        page: 'side',
        resultPerfect: 'Perfekt! Du har svaret rigtigt på alle spørgsmål!',
        resultGreat: 'Fantastisk! Du har styr på det meste!',
        resultGood: 'Godt klaret! Du har en god forståelse.',
        resultOk: 'Ikke dårligt, men der er plads til forbedring.',
        resultTryAgain: 'Prøv at gennemgå materialet igen og tag quizzen en gang til!',
        promptLanguage: 'dansk',
        difficultyLevel: 'Sværhedsgrad:',
        difficultyEasy: 'Let',
        difficultyMedium: 'Medium',
        difficultyHard: 'Svær',
        difficultyHint: 'Påvirker spørgsmålenes kompleksitet',
        import: 'Importér',
        export: 'Eksportér',
        exportAll: 'Eksportér alle',
        noQuizzesToExport: 'Ingen quizzer at eksportere.',
        importSuccess: '{count} quiz(zer) importeret!',
        importError: 'Kunne ikke importere filen. Tjek at formatet er korrekt.',
        settings: 'Indstillinger',
        language: 'Sprog:',
        theme: 'Tema:',
        themeLight: 'Lyst',
        themeDark: 'Mørkt',
        more: 'Mere',
        noApiKey: 'Husk at indtaste din OpenAI API-nøgle i indstillinger (⚙️)',
        timerMode: 'Timer mode',
        timeUp: 'Tiden er udløbet!'
    },
    en: {
        title: 'PDF Quiz',
        subtitle: 'Create and manage your quizzes',
        myQuizzes: 'My Quizzes',
        createQuiz: '+ Create new quiz',
        noQuizzes: 'No quizzes yet. Create your first quiz!',
        createNewQuiz: 'Create new quiz',
        editQuiz: 'Edit quiz',
        name: 'Name:',
        namePlaceholder: 'E.g. Biology - Chapter 3',
        description: 'Description (optional):',
        descriptionPlaceholder: 'Short description of the quiz...',
        save: 'Save',
        cancel: 'Cancel',
        apiKey: 'OpenAI API key:',
        apiKeyHint: 'The key is stored locally in your browser',
        selectPdfFiles: 'Select PDF files:',
        selectFiles: 'Select files:',
        dropZoneText: 'Drag files here or click to select',
        dropZoneHint: 'PDF, Word, TXT, Markdown',
        generateQuestions: 'Generate questions from files',
        skip: 'Skip',
        continueToQuiz: 'Continue to quiz',
        quizReady: 'Quiz ready!',
        startQuiz: 'Start Quiz',
        manageQuestions: 'Manage questions',
        addMorePdfs: 'Add more PDFs',
        backToMyQuizzes: 'Back to my quizzes',
        addQuestion: '+ Add question',
        deleteAll: 'Delete all',
        back: 'Back',
        addNewQuestion: 'Add new question',
        editQuestion: 'Edit question',
        question: 'Question:',
        questionEntity: 'Question',
        questionPlaceholder: 'Write your question here...',
        answerOptions: 'Answer options:',
        answerA: 'Answer A',
        answerB: 'Answer B',
        answerC: 'Answer C',
        answerD: 'Answer D',
        correctAnswer: 'Correct answer:',
        questionOf: 'Question {current} of {total}',
        nextQuestion: 'Next question',
        quizFinished: 'Quiz Finished!',
        tryAgain: 'Try again',
        footer: 'Create quizzes from your PDF documents',
        open: 'Open',
        edit: 'Edit',
        delete: 'Delete',
        questions: 'questions',
        noDescription: 'No description',
        noQuestionsYet: 'No questions yet. Add questions manually or generate from PDF.',
        questionsAvailable: '{count} questions available ({selected} random selected)',
        noQuestionsUpload: 'No questions yet. Upload PDF files to generate questions.',
        processing: 'Processing {file} ({current}/{total})...',
        questionsGenerated: '✓ {file}: {count} questions generated',
        errorProcessing: '✗ Error processing {file}: {error}',
        done: '✓ Done! {added} new questions added. Total: {total} questions.',
        confirmDeleteQuiz: 'Are you sure you want to delete "{name}"? This cannot be undone.',
        confirmDeleteQuestion: 'Are you sure you want to delete this question?',
        confirmDeleteAll: 'Are you sure you want to delete ALL questions? This cannot be undone.',
        undo: 'Undo',
        deleted: 'Deleted: {name}',
        restored: 'Restored: {name}',
        enterQuizName: 'Please enter a name for the quiz',
        enterQuestion: 'Please enter a question',
        fillAllOptions: 'All answer options must be filled',
        needOneQuestion: 'You need at least one question to start the quiz.',
        yourAnswer: 'Your answer:',
        correctAnswerWas: 'Correct answer:',
        source: 'Source:',
        page: 'page',
        resultPerfect: 'Perfect! You answered all questions correctly!',
        resultGreat: 'Fantastic! You have mastered most of it!',
        resultGood: 'Well done! You have a good understanding.',
        resultOk: 'Not bad, but there is room for improvement.',
        resultTryAgain: 'Try reviewing the material again and take the quiz once more!',
        promptLanguage: 'English',
        difficultyLevel: 'Difficulty:',
        difficultyEasy: 'Easy',
        difficultyMedium: 'Medium',
        difficultyHard: 'Hard',
        difficultyHint: 'Affects the complexity of questions',
        import: 'Import',
        export: 'Export',
        exportAll: 'Export all',
        noQuizzesToExport: 'No quizzes to export.',
        importSuccess: '{count} quiz(zes) imported!',
        importError: 'Could not import the file. Please check the format.',
        settings: 'Settings',
        language: 'Language:',
        theme: 'Theme:',
        themeLight: 'Light',
        themeDark: 'Dark',
        more: 'More',
        noApiKey: 'Remember to enter your OpenAI API key in settings (⚙️)',
        timerMode: 'Timer mode',
        timeUp: 'Time is up!'
    }
};

class I18n {
    constructor() {
        this.currentLang = localStorage.getItem('quiz_language') || 'da';
    }

    t(key, params = {}) {
        let text = translations[this.currentLang][key] || translations['da'][key] || key;
        Object.keys(params).forEach(param => {
            text = text.replace(`{${param}}`, params[param]);
        });
        return text;
    }

    setLanguage(lang) {
        this.currentLang = lang;
        localStorage.setItem('quiz_language', lang);
        document.documentElement.lang = lang;
    }

    getLanguage() {
        return this.currentLang;
    }
}

const i18n = new I18n();
